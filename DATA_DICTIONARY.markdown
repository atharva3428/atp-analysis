# Data Dictionary for ATP Tennis Analysis Tables and CSVs

This data dictionary describes the Snowflake tables in `tennis_db.atp` and CSVs generated by `python/atp_analysis.ipynb` for Tableau visualizations. The dataset is sourced from Jeff Sackmann’s ATP Tennis Repository (CC BY-NC-SA 4.0).

## AGE_IMPACT (Table)
Aggregated performance metrics by age group and year.

| Column Name               | Data Type | Description                                           |
|---------------------------|-----------|-------------------------------------------------------|
| YEAR                      | Integer   | Year of performance (e.g., 2010).                     |
| AGE_GROUP                 | Integer   | Age group of players (e.g., 22).                      |
| WIN_RATE                  | Float     | Average win rate (wins/matches) for the age group.    |
| MATCHES                   | Integer   | Total matches played by the age group in the year.    |
| AVG_FIRST_SERVE_PCT_BY_AGE| Float     | Average first serve percentage for the age group.     |

- **Links**:
  - `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_PERFORMANCE_TRENDS`, `TOURNAMENT_TRENDS`, `PLAYER_MATCHES_VIEW`, `MATCHES` via `YEAR`.

## MATCHES (Table)
Raw match data from the ATP dataset (2000–2019).

| Column Name           | Data Type | Description                                           |
|-----------------------|-----------|-------------------------------------------------------|
| TOURNEY_ID            | String    | Unique identifier for the tournament (e.g., "2000-301"). |
| TOURNEY_NAME          | String    | Name of the tournament (e.g., "Auckland").            |
| SURFACE               | String    | Court surface (e.g., "Hard", "Clay", "Grass").        |
| DRAW_SIZE             | Integer   | Number of players in the tournament draw.             |
| TOURNEY_LEVEL         | String    | Tournament level (e.g., "A" for ATP, "G" for Grand Slam). |
| MATCH_NUM             | Integer   | Match number in the tournament.                      |
| WINNER_ID             | Integer   | Player ID of the match winner.                       |
| WINNER_SEED           | String    | Seed of the winner (e.g., "1", "UNSEEDED").          |
| WINNER_ENTRY          | String    | Entry type of the winner (e.g., "Q" for qualifier, "WC" for wildcard). |
| WINNER_NAME           | String    | Name of the match winner (e.g., "Tommy Haas").       |
| WINNER_HAND           | String    | Winner’s dominant hand (e.g., "R", "L").             |
| WINNER_HT             | Integer   | Winner’s height in centimeters.                      |
| WINNER_IOC            | String    | Winner’s country code (e.g., "GER").                 |
| WINNER_AGE            | Float     | Winner’s age at match time.                          |
| LOSER_ID              | Integer   | Player ID of the match loser.                        |
| LOSER_SEED            | String    | Seed of the loser (e.g., "UNSEEDED").                |
| LOSER_ENTRY           | String    | Entry type of the loser (e.g., "Q", "WC").           |
| LOSER_NAME            | String    | Name of the match loser (e.g., "Jeff Tarango").      |
| LOSER_HAND            | String    | Loser’s dominant hand (e.g., "R", "L").              |
| LOSER_HT              | Integer   | Loser’s height in centimeters.                       |
| LOSER_IOC             | String    | Loser’s country code (e.g., "USA").                  |
| LOSER_AGE             | Float     | Loser’s age at match time.                           |
| SCORE                 | String    | Match score (e.g., "7-5 4-6 7-5").                   |
| BEST_OF               | Integer   | Number of sets (e.g., 3, 5).                         |
| ROUND                 | String    | Tournament round (e.g., "R32", "F").                 |
| MINUTES               | Integer   | Match duration in minutes.                           |
| W_ACE                 | Integer   | Winner’s aces.                                       |
| W_DF                  | Integer   | Winner’s double faults.                              |
| W_SVPT                | Integer   | Winner’s service points.                             |
| W_1STIN               | Integer   | Winner’s first serves in.                            |
| W_1STWON              | Integer   | Winner’s first serve points won.                     |
| W_2NDWON              | Integer   | Winner’s second serve points won.                    |
| W_SVGMS               | Integer   | Winner’s service games.                              |
| W_BPSAVED             | Integer   | Winner’s break points saved.                         |
| W_BPFACED             | Integer   | Winner’s break points faced.                         |
| L_ACE                 | Integer   | Loser’s aces.                                        |
| L_DF                  | Integer   | Loser’s double faults.                               |
| L_SVPT                | Integer   | Loser’s service points.                              |
| L_1STIN               | Integer   | Loser’s first serves in.                             |
| L_1STWON              | Integer   | Loser’s first serve points won.                      |
| L_2NDWON              | Integer   | Loser’s second serve points won.                     |
| L_SVGMS               | Integer   | Loser’s service games.                               |
| L_BPSAVED             | Integer   | Loser’s break points saved.                          |
| L_BPFACED             | Integer   | Loser’s break points faced.                          |
| WINNER_RANK           | Integer   | Winner’s ATP ranking at match time.                  |
| WINNER_RANK_POINTS    | Integer   | Winner’s ATP ranking points.                         |
| LOSER_RANK            | Integer   | Loser’s ATP ranking at match time.                   |
| LOSER_RANK_POINTS     | Integer   | Loser’s ATP ranking points.                          |
| TOURNEY_DATE          | Date      | Date of the tournament start.                        |

- **Links**:
  - `PLAYERS` via `WINNER_ID`, `LOSER_ID`, `WINNER_NAME`, `LOSER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `WINNER_NAME`, `LOSER_NAME`, `SURFACE`.
  - `TOURNAMENT_STATS` via `TOURNEY_ID`, `TOURNEY_NAME`.
  - `AGE_IMPACT`, `TOURNAMENT_TRENDS`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_PERFORMANCE_TRENDS`, `PLAYER_MATCHES_VIEW` via `YEAR` (derived from `TOURNEY_DATE`).

## PLAYERS (Table)
Player information from the ATP dataset.

| Column Name     | Data Type | Description                                      |
|-----------------|-----------|--------------------------------------------------|
| PLAYER_ID       | Integer   | Unique identifier for the player.                |
| FIRST_NAME      | String    | Player’s first name.                            |
| LAST_NAME       | String    | Player’s last name.                             |
| HAND            | String    | Player’s dominant hand (e.g., "R", "L").        |
| BIRTH_DATE      | String    | Date of birth (e.g., "1981-08-08").             |
| COUNTRY_CODE    | String    | Player’s country code (e.g., "SUI").            |
| HEIGHT          | Integer   | Player’s height in centimeters.                 |
| WIKIDATA_ID     | String    | Wikidata identifier for the player.             |

- **Links**:
  - `MATCHES` via `PLAYER_ID` (`WINNER_ID`, `LOSER_ID`).
  - `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_STATS`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `SERVE_EFFECTIVENESS_BY_SURFACE`, `PLAYER_MATCHES_VIEW` via `PLAYER_ID`, `FIRST_NAME` + `LAST_NAME` (as `PLAYER_NAME`).

## PLAYER_CONSISTENCY (Table and CSV: `player_consistency.csv`)
Player consistency across years based on win rate.

| Column Name        | Data Type | Description                                           |
|--------------------|-----------|-------------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Novak Djokovic").           |
| AVG_WIN_RATE       | Float     | Average win rate (wins/matches) across all years.      |
| WIN_RATE_STDDEV    | Float     | Standard deviation of win rate, indicating consistency.|
| YEARS_ACTIVE       | Integer   | Number of years with recorded performance (>5).        |

- **Links**:
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.

## PLAYER_PERFORMANCE (Table)
Overall player performance metrics.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Andy Murray").        |
| HAND               | String    | Player’s dominant hand (e.g., "R", "L").         |
| TOTAL_MATCHES      | Integer   | Total matches played across all years.          |
| WINS               | Integer   | Total matches won across all years.             |
| TOTAL_ACES         | Integer   | Total aces served across all years.             |
| TOTAL_DOUBLE_FAULTS| Integer   | Total double faults across all years.           |
| AVG_FIRST_SERVE_PCT| Float     | Average first serve percentage across matches.   |
| AVG_BP_SAVE_PCT    | Float     | Average break points saved percentage.          |

- **Links**:
  - `PLAYERS` via `PLAYER_NAME` (as `FIRST_NAME` + `LAST_NAME`), `HAND`.
  - `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `PLAYER_NAME`, `AVG_FIRST_SERVE_PCT`.

## PLAYER_PERFORMANCE_TRENDS (Table and CSV: `player_performance_trends.csv`)
Year-over-year win rate trends for players.

| Column Name         | Data Type | Description                                      |
|---------------------|-----------|--------------------------------------------------|
| PLAYER_NAME         | String    | Name of the player (e.g., "Roger Federer").       |
| YEAR                | Integer   | Year of performance (e.g., 2005).                |
| MATCHES             | Integer   | Total matches played in the year.                |
| WINS                | Integer   | Number of matches won in the year.               |
| WIN_PERCENTAGE      | Float     | Win rate (wins/matches) for the year.            |
| ACES                | Integer   | Total aces served in the year.                   |
| AVG_FIRST_SERVE_PCT | Float     | Average first serve percentage in the year.      |
| AVG_BP_SAVE_PCT     | Float     | Average break points saved percentage in the year.|
| PREV_WIN_RATE       | Float     | Win rate from the previous year.                 |
| WIN_RATE_CHANGE     | Float     | Change in win rate from previous year to current.|

- **Links**:
  - `PLAYER_CONSISTENCY` (Table/CSV) via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.
  - `AGE_IMPACT`, `TOURNAMENT_TRENDS`, `MATCHES` via `YEAR`.

## PLAYER_STATS (Table)
Detailed statistics per player from match data.

| Column Name            | Data Type | Description                                      |
|------------------------|-----------|--------------------------------------------------|
| PLAYER_NAME            | String    | Name of the player (e.g., "Stan Wawrinka").      |
| TOTAL_WINS             | Integer   | Total matches won across all years.             |
| GRAND_SLAM_WINS        | Integer   | Number of Grand Slam titles won.                |
| TOURNAMENTS_WON        | Integer   | Number of tournaments won.                      |
| AVG_FIRST_SERVE_WIN_PCT| Float     | Average percentage of first serve points won.    |
| AVG_ACE_PCT            | Float     | Average percentage of serves that are aces.      |

- **Links**:
  - `PLAYERS` via `PLAYER_NAME` (as `FIRST_NAME` + `LAST_NAME`).
  - `MATCHES` via `PLAYER_NAME` (`WINNER_NAME`, `LOSER_NAME`).
  - `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `PLAYER_NAME`.

## PLAYER_YEARLY_PERFORMANCE (Table)
Yearly performance metrics for players.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Rafael Nadal").       |
| YEAR               | Integer   | Year of performance (e.g., 2010).               |
| MATCHES            | Integer   | Total matches played in the year.               |
| WINS               | Integer   | Number of matches won in the year.              |
| WIN_PERCENTAGE     | Float     | Win rate (wins/matches) for the year.           |
| ACES               | Integer   | Total aces served in the year.                  |
| AVG_FIRST_SERVE_PCT| Float     | Average first serve percentage in the year.     |
| AVG_BP_SAVE_PCT    | Float     | Average break points saved percentage in the year.|

- **Links**:
  - `PLAYERS` via `PLAYER_NAME` (as `FIRST_NAME` + `LAST_NAME`).
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`, `YEAR`.
  - `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.
  - `AGE_IMPACT`, `TOURNAMENT_TRENDS`, `MATCHES` via `YEAR`.

## SERVE_EFFECTIVENESS_BY_SURFACE (Table and CSV: `serve_effectiveness_by_surface.csv`)
First serve percentage statistics by player and surface.

| Column Name            | Data Type | Description                                            |
|------------------------|-----------|--------------------------------------------------------|
| PLAYER_NAME            | String    | Name of the player (e.g., "Rafael Nadal").              |
| SURFACE                | String    | Court surface (e.g., "Hard", "Clay", "Grass").          |
| AVG_FIRST_SERVE_PCT    | Float     | Average first serve percentage across matches.         |
| STDDEV_FIRST_SERVE_PCT | Float     | Standard deviation of first serve percentage.           |

- **Links**:
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYER_CONSISTENCY` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.
  - `MATCHES`, `TOURNAMENT_STATS` via `SURFACE`.

## TOURNAMENT_STATS (Table)
Aggregated statistics for tournaments.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| TOURNEY_NAME       | String    | Name of the tournament (e.g., "US Open").        |
| TOURNEY_LEVEL      | String    | Tournament level (e.g., "A" for ATP, "G" for Grand Slam). |
| SURFACE            | String    | Court surface (e.g., "Hard").                   |
| TOTAL_MATCHES      | Integer   | Total matches played in the tournament.         |
| AVG_MATCH_DURATION | Float     | Average match duration in minutes.              |
| GRAND_SLAM_MATCHES | Integer   | Number of matches in Grand Slam tournaments.    |

- **Links**:
  - `MATCHES` via `TOURNEY_NAME`, `TOURNEY_LEVEL`, `SURFACE`.
  - `TOURNAMENT_TRENDS` via `TOURNEY_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `SURFACE`.

## TOURNAMENT_TRENDS (Table)
Trends in tournament metrics over years.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Novak Djokovic").     |
| LEVEL_GROUP        | String    | Tournament level group (e.g., "Grand Slam", "ATP"). |
| MATCHES            | Integer   | Total matches played in the level group.        |
| WINS               | Integer   | Number of matches won in the level group.       |
| WIN_PERCENT        | Float     | Win rate (wins/matches) in the level group.     |

- **Links**:
  - `TOURNAMENT_STATS`, `MATCHES` via `LEVEL_GROUP` (as `TOURNEY_LEVEL`).
  - `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `PLAYER_STATS`, `PLAYER_MATCHES_VIEW` via `PLAYER_NAME`.

## PLAYER_MATCHES_VIEW (Table)
Player-level view of match data.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Roger Federer").      |
| TOURNEY_LEVEL      | String    | Tournament level (e.g., "A" for ATP, "G" for Grand Slam). |
| DRAW_SIZE          | Integer   | Number of players in the tournament draw.        |
| PLAYER_ID          | Integer   | Unique identifier for the player.                |
| YEAR               | Integer   | Year of the match.                              |
| HAND               | String    | Player’s dominant hand (e.g., "R", "L").         |
| COUNTRY            | String    | Player’s country code (e.g., "SUI").            |
| HEIGHT             | Integer   | Player’s height in centimeters.                 |
| AGE                | Float     | Player’s age at match time.                     |
| RANK               | Integer   | Player’s ATP ranking at match time.             |
| IS_WIN             | Integer   | Indicates if the player won the match (1 = win, 0 = loss). |
| ACES               | Integer   | Aces served by the player in the match.         |
| DOUBLE_FAULTS      | Integer   | Double faults by the player in the match.       |
| FIRST_SERVE_PCT    | Float     | First serve percentage in the match.            |
| BP_SAVE_PCT        | Float     | Break points saved percentage in the match.     |

- **Links**:
  - `PLAYERS` via `PLAYER_ID`, `PLAYER_NAME` (as `FIRST_NAME` + `LAST_NAME`), `HAND`, `COUNTRY`, `HEIGHT`.
  - `MATCHES` via `PLAYER_ID` (`WINNER_ID`, `LOSER_ID`), `PLAYER_NAME` (`WINNER_NAME`, `LOSER_NAME`), `YEAR`, `TOURNEY_LEVEL`.
  - `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `PLAYER_STATS` via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `PLAYER_NAME`, `FIRST_SERVE_PCT`.
  - `AGE_IMPACT` via `YEAR`.
# Data Dictionary for ATP Tennis Analysis Tables and CSVs

This data dictionary describes the Snowflake tables in `tennis_db.atp` and CSVs generated by `python/atp_analysis.ipynb` for Tableau visualizations. The dataset is sourced from Jeff Sackmann’s ATP Tennis Repository (CC BY-NC-SA 4.0).

## AGE_IMPACT (Table)
Analyzes the impact of player age on performance metrics.

| Column Name     | Data Type | Description                                      |
|-----------------|-----------|--------------------------------------------------|
| PLAYER_ID       | Integer   | Unique identifier for the player.                |
| PLAYER_NAME     | String    | Name of the player (e.g., "Roger Federer").      |
| AGE             | Integer   | Player’s age in the year of performance.        |
| AVG_RANK        | Float     | Average ATP ranking for the age.                |
| TOTAL_WINS      | Integer   | Total matches won at the age.                   |
| TOTAL_MATCHES   | Integer   | Total matches played at the age.                |

- **Primary Key**: `PLAYER_ID` + `AGE`
- **Links**:
  - `PLAYERS` via `PLAYER_ID`, `PLAYER_NAME`.
  - `PLAYER_PERFORMANCE` via `PLAYER_ID`, `PLAYER_NAME`.
  - `PLAYER_YEARLY_PERFORMANCE` via `PLAYER_ID`, `PLAYER_NAME`, `AGE`.

## MATCHES (Table)
Raw match data from the ATP dataset (2000–2019).

| Column Name     | Data Type | Description                                      |
|-----------------|-----------|--------------------------------------------------|
| TOURNEY_ID      | String    | Unique identifier for the tournament (e.g., "2005-Wimbledon"). |
| TOURNEY_NAME    | String    | Name of the tournament (e.g., "Wimbledon").      |
| SURFACE         | String    | Court surface (e.g., "Hard", "Clay", "Grass").   |
| TOURNEY_DATE    | Date      | Date of the tournament start.                   |
| MATCH_NUM       | Integer   | Match number in the tournament.                 |
| WINNER_ID       | Integer   | Player ID of the match winner.                  |
| WINNER_NAME     | String    | Name of the match winner.                       |
| LOSER_ID        | Integer   | Player ID of the match loser.                   |
| LOSER_NAME      | String    | Name of the match loser.                        |
| FIRST_SERVE_PCT | Float     | First serve percentage for the winner.          |
| BP_SAVE_PCT     | Float     | Break points saved percentage for the winner.   |

- **Primary Key**: `TOURNEY_ID` + `MATCH_NUM`
- **Links**:
  - `PLAYERS` via `WINNER_ID`, `LOSER_ID`, `WINNER_NAME`, `LOSER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `WINNER_NAME`, `LOSER_NAME`, `SURFACE`.
  - `TOURNAMENT_STATS` via `TOURNEY_ID`, `TOURNEY_NAME`.

## PLAYERS (Table)
Player information from the ATP dataset.

| Column Name     | Data Type | Description                                      |
|-----------------|-----------|--------------------------------------------------|
| PLAYER_ID       | Integer   | Unique identifier for the player.                |
| PLAYER_NAME     | String    | Name of the player (e.g., "Rafael Nadal").       |
| HAND            | String    | Player’s dominant hand (e.g., "Right", "Left").  |
| COUNTRY         | String    | Player’s country (e.g., "ESP").                 |
| HEIGHT          | Integer   | Player’s height in centimeters.                 |
| DOB             | Date      | Date of birth.                                  |

- **Primary Key**: `PLAYER_ID`
- **Links**:
  - `MATCHES` via `PLAYER_ID` (`WINNER_ID`, `LOSER_ID`).
  - `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE`, `PLAYER_STATS`, `AGE_IMPACT`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS`, `SERVE_EFFECTIVENESS_BY_SURFACE` via `PLAYER_ID`, `PLAYER_NAME`.

## PLAYER_CONSISTENCY (Table and CSV: `player_consistency.csv`)
Player consistency across years based on win rate.

| Column Name        | Data Type | Description                                           |
|--------------------|-----------|-------------------------------------------------------|
| PLAYER_NAME        | String    | Name of the player (e.g., "Novak Djokovic").           |
| AVG_WIN_RATE       | Float     | Average win rate (wins/matches) across all years.      |
| WIN_RATE_STDDEV    | Float     | Standard deviation of win rate, indicating consistency.|
| YEARS_ACTIVE       | Integer   | Number of years with recorded performance (>5).        |

- **Primary Key**: `PLAYER_NAME`
- **Links**:
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE` via `PLAYER_NAME`.

## PLAYER_PERFORMANCE (Table)
Overall player performance metrics.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_ID          | Integer   | Unique identifier for the player.                |
| PLAYER_NAME        | String    | Name of the player (e.g., "Andy Murray").        |
| TOTAL_WINS         | Integer   | Total matches won across all years.             |
| TOTAL_MATCHES      | Integer   | Total matches played across all years.          |
| TOTAL_ACES         | Integer   | Total aces served across all years.             |
| TOTAL_DOUBLE_FAULTS| Integer   | Total double faults across all years.           |

- **Primary Key**: `PLAYER_ID`
- **Links**:
  - `PLAYERS` via `PLAYER_ID`, `PLAYER_NAME`.
  - `PLAYER_YEARLY_PERFORMANCE`, `AGE_IMPACT`, `PLAYER_CONSISTENCY`, `PLAYER_PERFORMANCE_TRENDS` via `PLAYER_ID`, `PLAYER_NAME`.

## PLAYER_PERFORMANCE_TRENDS (Table and CSV: `player_performance_trends.csv`)
Year-over-year win rate trends for players.

| Column Name         | Data Type | Description                                      |
|---------------------|-----------|--------------------------------------------------|
| PLAYER_NAME         | String    | Name of the player (e.g., "Roger Federer").       |
| YEAR                | Integer   | Year of performance (e.g., 2005).                |
| WINS                | Integer   | Number of matches won in the year.               |
| MATCHES             | Integer   | Total matches played in the year.                |
| PREV_WIN_RATE       | Float     | Win rate (wins/matches) from the previous year.  |
| WIN_RATE_CHANGE     | Float     | Change in win rate from previous year to current.|

- **Primary Key**: `PLAYER_NAME` + `YEAR`
- **Links**:
  - `PLAYER_CONSISTENCY` (Table/CSV) via `PLAYER_NAME`.
  - `SERVE_EFFECTIVENESS_BY_SURFACE` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_YEARLY_PERFORMANCE` via `PLAYER_NAME`.

## PLAYER_STATS (Table)
Detailed statistics per player from match data.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_ID          | Integer   | Unique identifier for the player.                |
| PLAYER_NAME        | String    | Name of the player (e.g., "Stan Wawrinka").      |
| TOTAL_ACES         | Integer   | Total aces served across all matches.           |
| TOTAL_DOUBLE_FAULTS| Integer   | Total double faults across all matches.         |
| FIRST_SERVE_PCT    | Float     | Average first serve percentage across matches.   |
| BP_SAVE_PCT        | Float     | Average break points saved percentage.          |

- **Primary Key**: `PLAYER_ID`
- **Links**:
  - `PLAYERS` via `PLAYER_ID`, `PLAYER_NAME`.
  - `MATCHES` via `PLAYER_ID` (`WINNER_ID`, `LOSER_ID`).
  - `SERVE_EFFECTIVENESS_BY_SURFACE` via `PLAYER_NAME`, `FIRST_SERVE_PCT`.

## PLAYER_YEARLY_PERFORMANCE (Table)
Yearly performance metrics for players.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| PLAYER_ID          | Integer   | Unique identifier for the player.                |
| PLAYER_NAME        | String    | Name of the player (e.g., "Rafael Nadal").       |
| YEAR               | Integer   | Year of performance (e.g., 2010).               |
| WINS               | Integer   | Number of matches won in the year.              |
| MATCHES            | Integer   | Total matches played in the year.               |
| RANK               | Integer   | ATP ranking at year-end.                        |

- **Primary Key**: `PLAYER_ID` + `YEAR`
- **Links**:
  - `PLAYERS` via `PLAYER_ID`, `PLAYER_NAME`.
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`, `YEAR`.
  - `PLAYER_CONSISTENCY` (Table/CSV) via `PLAYER_NAME`.
  - `AGE_IMPACT` via `PLAYER_ID`, `PLAYER_NAME`, `YEAR`.

## SERVE_EFFECTIVENESS_BY_SURFACE (Table and CSV: `serve_effectiveness_by_surface.csv`)
First serve percentage statistics by player and surface.

| Column Name            | Data Type | Description                                            |
|------------------------|-----------|--------------------------------------------------------|
| PLAYER_NAME            | String    | Name of the player (e.g., "Rafael Nadal").              |
| SURFACE                | String    | Court surface (e.g., "Hard", "Clay", "Grass").          |
| AVG_FIRST_SERVE_PCT    | Float     | Average first serve percentage across matches.         |
| STDDEV_FIRST_SERVE_PCT | Float     | Standard deviation of first serve percentage.           |

- **Primary Key**: `PLAYER_NAME` + `SURFACE`
- **Links**:
  - `PLAYER_PERFORMANCE_TRENDS` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYER_CONSISTENCY` (Table/CSV) via `PLAYER_NAME`.
  - `PLAYERS`, `PLAYER_PERFORMANCE`, `PLAYER_STATS` via `PLAYER_NAME`.

## TOURNAMENT_STATS (Table)
Aggregated statistics for tournaments.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| TOURNEY_ID         | String    | Unique identifier for the tournament.            |
| TOURNEY_NAME       | String    | Name of the tournament (e.g., "US Open").        |
| SURFACE            | String    | Court surface (e.g., "Hard").                   |
| TOTAL_MATCHES      | Integer   | Total matches played in the tournament.         |
| AVG_RANK_WINNER    | Float     | Average ATP ranking of match winners.           |

- **Primary Key**: `TOURNEY_ID`
- **Links**:
  - `MATCHES` via `TOURNEY_ID`, `TOURNEY_NAME`.
  - `TOURNAMENT_TRENDS` via `TOURNEY_NAME`.

## TOURNAMENT_TRENDS (Table)
Trends in tournament metrics over years.

| Column Name        | Data Type | Description                                      |
|--------------------|-----------|--------------------------------------------------|
| TOURNEY_NAME       | String    | Name of the tournament (e.g., "Australian Open").|
| YEAR               | Integer   | Year of the tournament.                         |
| TOTAL_MATCHES      | Integer   | Total matches played in the year.               |
| AVG_RANK_WINNER    | Float     | Average ATP ranking of winners in the year.     |

- **Primary Key**: `TOURNEY_NAME` + `YEAR`
- **Links**:
  - `TOURNAMENT_STATS` via `TOURNEY_NAME`.
  - `MATCHES` via `TOURNEY_NAME`, `YEAR`.